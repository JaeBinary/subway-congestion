# subway-congestion
지하철 혼잡도 프로젝트 

---

## 📁 프로젝트 구조

```
subway-congestion/
│
├── .gitignore
├── make_metro_datetime.py.py
├── README.md
│
├── data/
│   │
│   ├── input/
│   │   ├── (1호선)서울교통공사_서울 도시철도 열차운행시각표_20250704.csv
│   │   ├── metro.db
│   │   ├── metro_datetime.db
│   │   └── 서울교통공사_서울 도시철도 열차운행시각표_20250704.csv
│   │
│   └── output/
│       │
│       ├── 1-역간_소요시간/
│       │   ├── 역간_소요시간_전체.csv
│       │   └── 역간_소요시간_주중주말비교.csv
│       │
│       ├── 2-배차간격/
│       │   ├── 배차간격_개선우선순위_Top30.csv
│       │   ├── 배차간격_변동성_높은역.csv
│       │   ├── 배차간격_주중주말비교.csv
│       │   ├── 배차간격_짧은역_Top30.csv
│       │   ├── 역별_배차간격_Top30_주말.csv
│       │   ├── 역별_배차간격_Top30_주중.csv
│       │   └── 역별_배차간격_전체.csv
│       │
│       └── 3-복합지표/
│           ├── 개선_우선순위_Top30.csv
│           ├── 복합지표_Top50_주말.csv
│           ├── 복합지표_Top50_주중.csv
│           └── 복합지표_주중주말비교.csv
│
├── doc/
│   ├── 1-역간_소요시간_분석_가이드.md
│   ├── 2-배차간격_분석_가이드.md
│   └── 3-복합지표_분석_가이드.md
│
├── src/
│   ├── 1-역간_소요시간_분석.ipynb
│   ├── 2-배차간격_분석.ipynb
│   └── 3-복합지표_분석.ipynb
│
└── test/
    └── test.ipynb
```

---

## 📊 디렉토리별 설명

### 🗂️ data/
- **input/**: 서울교통공사 공공데이터 원본 파일 및 SQLite DB
- **output/**: 분석 결과를 카테고리별로 구분하여 저장
  - `1-역간_소요시간/`: 인접 역 사이의 이동 시간 분석
  - `2-배차간격/`: 역별 열차 도착 간격 분석
  - `3-복합지표/`: 소요시간과 배차간격을 결합한 종합 분석

### 📖 doc/
분석 방법론, 결과 해석, 활용 방안을 상세히 설명한 가이드 문서

### 💻 src/
데이터 분석 및 시각화를 수행하는 Jupyter Notebook 소스 코드
- 각 노트북은 독립적으로 실행 가능
- 순차적 실행 권장 (1 → 2 → 3)

### 🧪 test/
프로토타입 개발 및 기능 검증을 위한 실험용 노트북

---

## 🔢 분석 순서

```
1️⃣ 역간_소요시간_분석
     ↓
2️⃣ 배차간격_분석
     ↓
3️⃣ 복합지표_분석 (1 × 2)
```

---

## 📝 파일 명명 규칙

- **분석 노트북**: `{순서}-{분석명}_분석.ipynb`
- **가이드 문서**: `{순서}-{분석명}_분석_가이드.md`
- **결과 CSV**: `{분석결과}_{상세분류}.csv`
- **데이터베이스**: `metro_datetime.db` (시간 데이터 전처리 완료)

---

## 🎯 주요 분석 지표

| 지표 | 의미 | 단위 |
|------|------|------|
| **역간 소요시간** | 연속된 두 역 사이의 이동 시간 | 분 |
| **배차 간격** | 같은 역에서 연속 열차 도착 시간 차이 | 분 |
| **복합 지표** | 소요시간 × 배차간격 (승객 대기 시간) | 분² |


---

### [서울교통공사_서울 도시철도 열차운행시각표](https://www.data.go.kr/data/15098251/fileData.do)
> 서울 도시철도 열차운행시각표 데이터

속성 | 설명
-|-
고유번호 | 데이터 행 번호
호선 | 지하철 노선 번호 (1~9호선)
역사코드 | 역의 고유 코드
역사명 | 열차도착/출발시간 기준 역 이름
주중주말 | - DAY(주중)<br>- SAT(토요일)<br>- END(일요일 및 공휴일)
방향 | - UP(상행)<br>- DOWN(하행)<br>- IN(2호선 내선 - 시계방향)<br>- OUT(2호선 외선 - 반시계방향)
급행여부 | - 1(급행)<br>- 0(일반)
열차코드 | 각 열차의 고유 ID<br>-K: 한국철도공사(코레일) 구간<br>-숫자: 열차 번호
열차도착시간 | 역에 도착하는 시간
열차출발시간 | 역에서 출발하는 시간<br>(⭐배차간격 계산의 기준!)
출발역 | 열차의 기점
도착역 | 열차의 종점

- 열차도착시간이 NULL인 경우, 출발역(기점)과 역사명이 같다.
- 열차출발시간이 NULL인 경우, 도착역(종점)과 역사명이 같다.

💡 열차도착시간, 열차출발시간: 영업일을 기준으로 시간을 산정하여 표기 상 23시를 초과하는 값이 존재할 수 있습니다.(24시 = 익일 00시, 25시 = 익일 01시)<br>
⚠️ 시간순이 아니라 열차코드순으로 정렬되어 있음! 즉, 배차간격 계산 전에 반드시 시간순 정렬 필요.
